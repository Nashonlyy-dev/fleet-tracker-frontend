### Variables Configuration
@hostname = localhost
@port = 3000
@host = http://{{hostname}}:{{port}}
@apiV1 = {{host}}/api/v1

### ----------------------------------------------------------
### AUTHENTICATION TESTS
### ----------------------------------------------------------

### 1. Register an Owner
POST {{apiV1}}/auth/register
Content-Type: application/json

{
    "name": "Big Boss Owner",
    "email": "owner@test.com",
    "password": "password123",
    "role": "owner"
}

### 2. Register a Driver
POST {{apiV1}}/auth/register
Content-Type: application/json

{
    "name": "Truck Driver 01",
    "email": "driver@test.com",
    "password": "password123",
    "role": "driver"
}

### 3. Login as Owner (To get Owner Token)
# @name ownerLogin
POST {{apiV1}}/auth/login
Content-Type: application/json

{
    "email": "owner@test.com",
    "password": "password123"
}

### 4. Login as Driver (To get Driver Token)
# @name driverLogin
POST {{apiV1}}/auth/login
Content-Type: application/json

{
    "email": "driver@test.com",
    "password": "password123"
}

### Capture Tokens from Responses
@ownerToken = {{ownerLogin.response.body.token}}
@driverToken = {{driverLogin.response.body.token}}

### ----------------------------------------------------------
### SECURITY & PROFILE TESTS
### ----------------------------------------------------------

### 5. Get Owner Profile (Should work)
GET {{apiV1}}/auth/profile
Authorization: Bearer {{ownerToken}}

### 6. Unauthorized Access Test (Should Fail - 401)
GET {{apiV1}}/auth/profile

### ----------------------------------------------------------
### LOCATION TRACKING TESTS
### ----------------------------------------------------------

### 7. Update Driver Location (Mogok, Myanmar)
# No driverId in body because it's extracted from @driverToken
POST {{apiV1}}/locations/update
Authorization: Bearer {{driverToken}}
Content-Type: application/json

{
    "coordinates": {
        "latitude": 22.9235,
        "longitude": 96.5070
    }
}

### 8. Update Driver Location (Move to Mandalay)
POST {{apiV1}}/locations/update
Authorization: Bearer {{driverToken}}
Content-Type: application/json

{
    "coordinates": {
        "latitude": 21.9588,
        "longitude": 96.0891
    }
}

### Get All Fleet Locations (As Owner)
GET http://localhost:3000/api/v1/locations/fleet
Authorization: Bearer {{ownerToken}}

### Get All Fleet Locations (As Driver - SHOULD FAIL/403)
GET http://localhost:3000/api/v1/locations/fleet
Authorization: Bearer {{driverToken}}

### ----------------------------------------------------------
### SYSTEM HEALTH
### ----------------------------------------------------------

### 10. Health Check
GET {{host}}/health